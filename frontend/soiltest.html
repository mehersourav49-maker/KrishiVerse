<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Soil Testing Booking - KrishiVerse</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { font-family: Arial, sans-serif; background: url("images/bg.png") no-repeat center/cover fixed; }
    header { background:#2f4f1f; color:#fff; padding:15px; text-align:center; }
    .form-card { max-width:600px; margin:30px auto; background:#fff; padding:25px; border-radius:10px; box-shadow:0 3px 10px rgba(0,0,0,.1);}
    .btn-submit { background:#28a745; color:#fff; font-weight:600; }
    .btn-submit:hover { background:#218838; }
    .booking-list { max-width:700px; margin:20px auto; }
  </style>
</head>
<body>
  <header>
    <h2>KrishiVerse - Soil Testing Booking</h2>
  </header>

  <main>
    <div class="form-card">
      <h4 class="mb-3">Book a Soil Test</h4>
      <form id="soilForm">
        <div class="mb-3">
          <label class="form-label">Farmer Name</label>
          <input type="text" class="form-control" id="farmerName" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Phone Number</label>
          <input type="tel" class="form-control" id="phone" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Village / District</label>
          <input type="text" class="form-control" id="location" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Select Soil Test Type</label>
          <select class="form-select" id="testType" required>
            <option value="">-- Choose Test --</option>
            <option>Basic pH Test</option>
            <option>Nutrient Test</option>
            <option>Full Soil Health Analysis</option>
          </select>
        </div>
        <div class="mb-3">
          <label class="form-label">Preferred Date</label>
          <input type="date" class="form-control" id="date" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Select Nearby Lab</label>
          <select class="form-select" id="lab" required>
            <option value="">-- Choose Lab --</option>
            <option>KVK Soil Testing Lab - Bhubaneswar</option>
            <option>ICAR Regional Lab - Cuttack</option>
            <option>District Agri Lab - Sambalpur</option>
            <option>Private Agri Lab - Berhampur</option>
          </select>
        </div>
        <button type="submit" class="btn btn-submit w-100">Book Test</button>
      </form>
    </div>

    <div class="booking-list">
      <h4 style="color:red" class="mb-3 text-center">My Soil Test Bookings</h4>
      <ul id="bookingList" class="list-group"></ul>
    </div>
  </main>

  <script>
  const form = document.getElementById("soilForm");
  const bookingList = document.getElementById("bookingList");

  // Load saved bookings
  let bookings = JSON.parse(localStorage.getItem("soilBookings")) || [];

  function displayBookings() {
    bookingList.innerHTML = "";
    if (bookings.length === 0) {
      bookingList.innerHTML = "<li class='list-group-item text-muted text-center'>No bookings yet</li>";
      return;
    }
    bookings.forEach((b, i) => {
      bookingList.innerHTML += `
        <li class="list-group-item d-flex justify-content-between align-items-start">
          <div>
            <strong>${b.farmerName}</strong> (${b.phone}) - ${b.testType} <br>
            üìç ${b.location} | üß™ ${b.lab} | üìÖ ${b.date}
          </div>
          <button class="btn btn-sm btn-danger" onclick="deleteBooking(${i})">Delete</button>
        </li>
      `;
    });
  }

  // Handle form submit
  form.addEventListener("submit", e => {
    e.preventDefault();

    const booking = {
      farmerName: document.getElementById("farmerName").value,
      phone: document.getElementById("phone").value,
      location: document.getElementById("location").value,
      testType: document.getElementById("testType").value,
      date: document.getElementById("date").value,
      lab: document.getElementById("lab").value
    };

    bookings.push(booking);
    localStorage.setItem("soilBookings", JSON.stringify(bookings));

    alert("‚úÖ Soil Test booked successfully!");
    form.reset();
    displayBookings();
  });

  // Delete booking by index
  function deleteBooking(index) {
    if (confirm("Are you sure you want to delete this booking?")) {
      bookings.splice(index, 1);
      localStorage.setItem("soilBookings", JSON.stringify(bookings));
      displayBookings();
    }
  }

  displayBookings();
</script>

</body>
</html>
